.quiz-editor {
  padding: 1.5rem;
  .qe-head { margin-bottom: 1rem; display:flex; justify-content:space-between; }
  .qe-form { display:grid; gap:.9rem; background:#fff; padding:1rem; border-radius:14px;
    box-shadow:0 10px 30px rgba(0,0,0,.06), 0 1px 2px rgba(0,0,0,.05);

    label { display:grid; gap:.4rem;
      > span { font-weight:600; color:#374151; }
      input, textarea, select { border:1px solid #e5e7eb; border-radius:10px; padding:.55rem .6rem; }
      textarea { min-height: 90px; }
      &.inline { display:flex; align-items:center; gap:.5rem; }
    }

    .tags-picker { display:flex; flex-wrap:wrap; gap:.4rem;
      .chip { border:1px solid #e5e7eb; padding:.3rem .6rem; border-radius:999px; background:#fff; cursor:pointer; }
      .chip.selected { background:#2563eb; color:#fff; border-color:#2563eb; }
    }

    .actions { display:flex; gap:.5rem; justify-content:flex-end; }
  }
}

/* Error banner */
.error-banner {
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: start;
  gap: .5rem;
  margin: 0 0 .75rem 0;
  padding: .6rem .75rem;
  border: 1px solid #fecaca;
  background: #fef2f2;
  color: #991b1b;
  border-radius: 12px;
  white-space: normal;
  word-break: break-word;

  .error-icon { line-height: 1.2; }
  .error-text { display: block; }
  .error-dismiss {
    border: none; background: transparent; color: inherit; cursor: pointer;
    font-size: 1.1rem; line-height: 1; padding: 0 .25rem;
  }
}

.loading { margin-bottom: .75rem; color: #6b7280; }

/* Questions box */
.qe-questions {
  margin-top: 1rem;
  background: #fff;
  border-radius: 14px;
  box-shadow: 0 10px 30px rgba(0,0,0,.06), 0 1px 2px rgba(0,0,0,.05);
  padding: 1rem;

  .q-head { display:flex; justify-content:space-between; align-items:center; margin-bottom: .6rem;
    h3 { margin: 0; }
  }

  .q-form { display:grid; gap:.8rem;
    label { display:grid; gap:.35rem;
      > span { font-weight:600; color:#374151; }
      input, select { border:1px solid #e5e7eb; border-radius:10px; padding:.55rem .6rem; }
    }

    .row2 { display:grid; grid-template-columns: 1fr 1fr; gap:.6rem; }

    .choices {
      display:grid; gap:.5rem;
      .choices-head { display:flex; justify-content:space-between; align-items:center;
        .choices-actions { display:flex; gap:.4rem; }
      }
      .choice-row { display:flex; gap:.6rem; align-items:center;
        input { flex: 1; border:1px solid #e5e7eb; border-radius:10px; padding:.5rem .6rem; }
        .inline { display:flex; align-items:center; gap:.4rem; }
      }
    }

    .tf { display:grid; gap:.4rem;
      .chip-group { display:flex; gap:.4rem; flex-wrap:wrap; }
      .chip { border:1px solid #e5e7eb; padding:.3rem .6rem; border-radius:999px; background:#fff; cursor:pointer; }
      .chip.selected { background:#2563eb; color:#fff; border-color:#2563eb; }
    }

    .actions { display:flex; gap:.5rem; justify-content:flex-end; }
  }

  .q-list {
    margin-top: .8rem; border-top:1px solid #eef2f7; padding-top: .8rem;
    h4 { margin: 0 0 .5rem 0; }
    .q-item { padding:.5rem 0; border-bottom:1px solid #f3f4f6;
      &:last-child { border-bottom: none; }
      .q-title { display:flex; gap:.4rem; align-items:baseline; }
      .muted { color:#6b7280; font-weight:400; }
      .q-sub { color:#374151; margin-top:.2rem; }
      .q-choices { margin:.3rem 0 0 1rem; color:#374151; }
    }
  }

  .qe-questions .q-item { position: relative; }
  .qe-questions .q-actions { display:flex; gap:.4rem; margin-top:.5rem; }
  .qe-questions [aria-disabled="true"] { opacity:.6; pointer-events:none; }
}

.lock-wrap { position: relative; }

/* Transparent, click-through overlay that still dims the UI */
.lock-wrap.is-locked::after {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(255, 255, 255, .25); /* more transparent */
  backdrop-filter: blur(0.1px);           /* very subtle blur */
  z-index: 2;
}

/* Dim & block interactions by default */
.lock-wrap.is-locked {
  --lock-dim: .55;
}
.lock-wrap.is-locked :where(input, textarea, select, button, a, [role="button"], [contenteditable]) {
  pointer-events: none;
  user-select: none;
  opacity: var(--lock-dim);
}

/* Explicit whitelist: elements marked with [data-allow] remain clickable above the overlay */
.lock-wrap.is-locked [data-allow] {
  pointer-events: auto !important;
  user-select: auto !important;
  opacity: 1 !important;
  position: relative;
  z-index: 3;
}

.lock-banner {
  position: absolute;
  z-index: 3;
  top: .5rem;
  right: .5rem;
  display: inline-flex;
  align-items: center;
  gap: .4rem;
  padding: .35rem .55rem;
  border-radius: 999px;
  background: #111827;
  color: #fff;
  font-weight: 600;
  font-size: .85rem;
  box-shadow: 0 4px 10px rgba(0,0,0,.15);
}